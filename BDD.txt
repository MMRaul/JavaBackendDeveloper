CREATE TABLE `Cliente` (
  `id_cliente` int PRIMARY KEY AUTO_INCREMENT,
  `nombre` varchar(100),
  `email` varchar(100) UNIQUE,
  `contraseña` varchar(100),
  `fecha_creacion` datetime,
  `domicilio` varchar(200),
  `telefono` varchar(20)
);

CREATE TABLE `Producto` (
  `id_producto` int PRIMARY KEY AUTO_INCREMENT,
  `nombre` varchar(100),
  `descripcion` text,
  `precio` decimal(10,2),
  `stock_actual` int,
  `categoria` varchar(100)
);

CREATE TABLE `Pedido` (
  `id_pedido` int PRIMARY KEY AUTO_INCREMENT,
  `id_cliente` int,
  `fecha_pedido` datetime,
  `estado` varchar(50),
  `total` decimal(10,2),
  `direccion_envio` varchar(200),
  `metodo_pago` varchar(50)
);

CREATE TABLE `DetallePedido` (
  `id_detalle` int PRIMARY KEY AUTO_INCREMENT,
  `id_pedido` int,
  `id_producto` int,
  `cantidad` int,
  `precio_unitario` decimal(10,2),
  `subtotal` decimal(10,2)
);

CREATE TABLE `Carrito` (
  `id_carrito` int PRIMARY KEY AUTO_INCREMENT,
  `id_cliente` int,
  `fecha_creacion` datetime,
  `estado` varchar(50)
);

CREATE TABLE `CarritoItem` (
  `id_carrito_item` int PRIMARY KEY AUTO_INCREMENT,
  `id_carrito` int,
  `id_producto` int,
  `cantidad` int,
  `precio_unitario` decimal(10,2)
);

CREATE TABLE `Notificaciones` (
  `id_notificacion` int PRIMARY KEY AUTO_INCREMENT,
  `id_cliente` int,
  `tipo` varchar(100),
  `mensaje` text,
  `fecha_envio` datetime,
  `leido` boolean DEFAULT false
);

CREATE TABLE `Abastecimiento` (
  `id_abastecimiento` int PRIMARY KEY AUTO_INCREMENT,
  `id_producto` int,
  `cantidad` int,
  `fecha_recepcion` datetime,
  `proveedor` varchar(100),
  `costo_unitario` decimal(10,2)
);

CREATE TABLE `Reportes` (
  `id_reporte` int PRIMARY KEY AUTO_INCREMENT,
  `tipo_reporte` varchar(100),
  `fecha_generado` datetime,
  `datos` text
);

ALTER TABLE `Pedido` ADD FOREIGN KEY (`id_cliente`) REFERENCES `Cliente` (`id_cliente`);

ALTER TABLE `DetallePedido` ADD FOREIGN KEY (`id_pedido`) REFERENCES `Pedido` (`id_pedido`);

ALTER TABLE `DetallePedido` ADD FOREIGN KEY (`id_producto`) REFERENCES `Producto` (`id_producto`);

ALTER TABLE `Carrito` ADD FOREIGN KEY (`id_cliente`) REFERENCES `Cliente` (`id_cliente`);

ALTER TABLE `CarritoItem` ADD FOREIGN KEY (`id_carrito`) REFERENCES `Carrito` (`id_carrito`);

ALTER TABLE `CarritoItem` ADD FOREIGN KEY (`id_producto`) REFERENCES `Producto` (`id_producto`);

ALTER TABLE `Notificaciones` ADD FOREIGN KEY (`id_cliente`) REFERENCES `Cliente` (`id_cliente`);

ALTER TABLE `Abastecimiento` ADD FOREIGN KEY (`id_producto`) REFERENCES `Producto` (`id_producto`);


----- Dicionario de datos  -----------------------------------------------------

Tabla: Cliente
Propósito: Almacena la información básica de los clientes registrados en la tienda.
| Campo            | Descripción                                      |
| ---------------- | ------------------------------------------------ |
| `id_cliente`     | Identificador único del cliente (PK).            |
| `nombre`         | Nombre completo del cliente.                     |
| `email`          | Correo electrónico del cliente (debe ser único). |
| `contraseña`     | Contraseña cifrada para autenticación.           |
| `fecha_creacion` | Fecha en que se registró el cliente.             |
| `domicilio`      | Dirección de residencia o envío principal.       |
| `telefono`       | Número de contacto del cliente.                  |

Tabla: Producto
Propósito: Contiene la información de los productos disponibles para la venta.
| Campo          | Descripción                                                      |
| -------------- | ---------------------------------------------------------------- |
| `id_producto`  | Identificador único del producto (PK).                           |
| `nombre`       | Nombre del producto.                                             |
| `descripcion`  | Descripción del producto (detalles, características).            |
| `precio`       | Precio unitario del producto.                                    |
| `stock_actual` | Cantidad actual disponible en inventario.                        |
| `categoria`    | Clasificación o tipo del producto (ej. ropa, electrónica, etc.). |

Tabla: Pedido
Propósito: Registra los pedidos realizados por los clientes.
| Campo             | Descripción                                                          |
| ----------------- | -------------------------------------------------------------------- |
| `id_pedido`       | Identificador único del pedido (PK).                                 |
| `id_cliente`      | Referencia al cliente que realizó el pedido (FK → Cliente).          |
| `fecha_pedido`    | Fecha en que se realizó el pedido.                                   |
| `estado`          | Estado actual del pedido (pendiente, enviado, entregado, cancelado). |
| `total`           | Monto total del pedido.                                              |
| `direccion_envio` | Dirección donde se enviará el pedido.                                |
| `metodo_pago`     | Método de pago utilizado (tarjeta, transferencia, etc.).             |


Tabla: DetallePedido
Propósito: Desglosa los productos incluidos en cada pedido.
| Campo             | Descripción                                          |
| ----------------- | ---------------------------------------------------- |
| `id_detalle`      | Identificador único del detalle (PK).                |
| `id_pedido`       | Referencia al pedido al que pertenece (FK → Pedido). |
| `id_producto`     | Producto incluido en el pedido (FK → Producto).      |
| `cantidad`        | Número de unidades del producto.                     |
| `precio_unitario` | Precio del producto al momento de la venta.          |
| `subtotal`        | Resultado de `cantidad × precio_unitario`.           |

Tabla: Carrito
Propósito: Representa el carrito de compras de un cliente (activo o histórico).
| Campo            | Descripción                                                          |
| ---------------- | -------------------------------------------------------------------- |
| `id_carrito`     | Identificador único del carrito (PK).                                |
| `id_cliente`     | Referencia al cliente (FK → Cliente).                                |
| `fecha_creacion` | Fecha en que se creó el carrito.                                     |
| `estado`         | Estado del carrito (activo, abandonado, convertido en pedido, etc.). |

Tabla: CarritoItem
Propósito: Contiene los productos añadidos al carrito.
| Campo             | Descripción                                    |
| ----------------- | ---------------------------------------------- |
| `id_carrito_item` | Identificador único del ítem (PK).             |
| `id_carrito`      | Referencia al carrito (FK → Carrito).          |
| `id_producto`     | Producto añadido al carrito (FK → Producto).   |
| `cantidad`        | Cantidad de unidades añadidas.                 |
| `precio_unitario` | Precio del producto en el momento de añadirlo. |


Tabla: Notificaciones
Propósito: Guarda los mensajes o alertas enviadas a los clientes (por ejemplo, confirmaciones, promociones o recordatorios).
| Campo             | Descripción                                                    |
| ----------------- | -------------------------------------------------------------- |
| `id_notificacion` | Identificador único (PK).                                      |
| `id_cliente`      | Referencia al cliente que la recibe (FK → Cliente).            |
| `tipo`            | Tipo de notificación (pedido confirmado, envío, oferta, etc.). |
| `mensaje`         | Contenido del mensaje.                                         |
| `fecha_envio`     | Cuándo fue enviada la notificación.                            |
| `leido`           | Indica si el cliente la ha leído (true/false).                 |


Tabla: Abastecimiento (Inventario)
Propósito: Registra los ingresos de productos al inventario (compras o reposiciones).
| Campo               | Descripción                                           |
| ------------------- | ----------------------------------------------------- |
| `id_abastecimiento` | Identificador único (PK).                             |
| `id_producto`       | Producto que se repone (FK → Producto).               |
| `cantidad`          | Cantidad de unidades recibidas.                       |
| `fecha_recepcion`   | Fecha en que ingresaron los productos.                |
| `proveedor`         | Nombre del proveedor o distribuidor.                  |
| `costo_unitario`    | Precio de compra por unidad (para control de costos). |

Tabla: Reportes
Propósito: Guarda información de reportes generados (de ventas, inventario, clientes, etc.).
| Campo            | Descripción                                                             |
| ---------------- | ----------------------------------------------------------------------- |
| `id_reporte`     | Identificador único del reporte (PK).                                   |
| `tipo_reporte`   | Tipo o categoría del reporte (ventas, stock, etc.).                     |
| `fecha_generado` | Cuándo fue creado el reporte.                                           |
| `datos`          | Contenido o referencia del reporte (puede almacenarse en JSON o texto). |



Como seria el controlador, repository, service usando Flux: para estas entidades Pedidos 
(id, cliente_id, fecha, estado) DetallePedido (id, pedido_id, producto_id, cantidad, precio_unitario)